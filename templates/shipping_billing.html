{% extends 'base.html' %}
{% load staticfiles %}
{% load natural_time %}
{% block content %}
<section class="cart_section">
   <div class="container">
      <div class="heading_top">
         <h2>Track Details</h2>
      </div>
      <div class="next-pre-cart-btn shoping-btn text-right">
         <a href="{% url 'Juntos:proceed-cart' %}" class="btn btn-lg btn-custom">Return to Shopping Cart</a>
      </div>
      <div class="row bs-wizard" style="border-bottom:0;">
         <div class="col-xs-4 bs-wizard-step complete">
            <div class="text-center bs-wizard-stepnum">Step 1</div>
            <div class="progress">
               <div class="progress-bar"></div>
            </div>
            <a href="#" class="bs-wizard-dot"></a>
            <div class="bs-wizard-info text-center">Shopping Card</div>
         </div>
         <div class="col-xs-4 bs-wizard-step active">
            <!-- complete -->
            <div class="text-center bs-wizard-stepnum">Step 2</div>
            <div class="progress">
               <div class="progress-bar"></div>
            </div>
            <a href="#" class="bs-wizard-dot"></a>
            <div class="bs-wizard-info text-center">Billing and Shipping</div>
         </div>
         <div class="col-xs-4 bs-wizard-step ">
            <!-- complete -->
            <div class="text-center bs-wizard-stepnum">Step 3</div>
            <div class="progress">
               <div class="progress-bar"></div>
            </div>
            <a href="#" class="bs-wizard-dot"></a>
            <div class="bs-wizard-info text-center">Payment Method</div>
         </div>
         <div class="col-xs-3 bs-wizard-step active">
            <!-- complete -->
         </div>
      </div>
   </div>
</section>
<section class="info-sec">
   <form class="form-horizontal" action="{% url 'Juntos:add-shipping' %}" method="POST">
      {% csrf_token %}
      <div class="container">
         <div class="info-inner-container clearfix">
            <div class="inner-info">
               <div class="form-heading ">BILLING INFORMATION</div>
               <div class="row">
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="FIRSTNAME"  class="col-sm-4 control-label padding-top">FIRST NAME<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control" name="b_first_name" value="" id="FIRSTNAME" maxlength="25">
                           {% if form_shipping.errors.b_first_name %}
                           <strong style="color:red">{{ form_shipping.errors.b_first_name | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="LASTNAME" class="col-sm-4 control-label  padding-top">LAST NAME<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control" name="b_last_name" value="" id="LASTNAME" maxlength="25">
                           {% if form_shipping.errors.b_last_name %}
                           <strong style="color:red">{{ form_shipping.errors.b_last_name | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="Email" class="col-sm-4 control-label padding-top">EMAIL<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input class="form-control" type="email" name="b_email" value="" id="Email" maxlength="80">
                           {% if form_shipping.errors.b_email %}
                           <strong style="color:red">{{ form_shipping.errors.b_email | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="PHONE" class="col-sm-4 control-label  padding-top">PHONE<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="tel" class="form-control" name="b_phone" value="" id="PHONE" maxlength="15">
                           {% if form_shipping.errors.b_phone %}
                           <strong style="color:red">{{ form_shipping.errors.b_phone | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="ADDRESS" class="col-sm-4 control-label  padding-top">ADDRESS<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control" name="b_address" id="ADDRESS" maxlength="80">
                           {% if form_shipping.errors.b_address %}
                           <strong style="color:red">{{ form_shipping.errors.b_address | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="STATE" class="col-sm-4 control-label  padding-top">STATE<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <select class="form-control" name="b_state" id="BILL-STATE">
                              <option value=""></option>
                           </select>
                           {% if form_shipping.errors.b_state %}
                           <strong style="color:red">{{ form_shipping.errors.b_state | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="CITY" class="col-sm-4 control-label  padding-top">CITY<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control" name="b_city" value="" id="CITY" maxlength="50">
                           {% if form_shipping.errors.b_city %}
                           <strong style="color:red">{{ form_shipping.errors.b_city | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="ZIP" class="col-sm-4 control-label  padding-top">ZIP<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control" name="b_zip" value="" id="ZIP" maxlength="20">
                           {% if form_shipping.errors.b_zip %}
                           <strong style="color:red">{{ form_shipping.errors.b_zip | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-12">
                     <div class="form-group">
                        <label for="COMPANY" class="col-sm-2 control-label  padding-top">COMPANY</label>
                        <div class="col-sm-10">
                           <input type="text" class="form-control" name="b_company" value="" id="COMPANY" maxlength="50">
                           {% if form_shipping.errors.b_company %}
                           <strong style="color:red">{{ form_shipping.errors.b_company | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="COUNTRY" class="col-sm-4 control-label  padding-top">COUNTRY<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <select class="form-control" name="b_country" id="Bill-COUNTRY">
                              <option value=""></option>
                           </select>
                           {% if form_shipping.errors.b_country %}
                           <strong style="color:red">{{ form_shipping.errors.b_country | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="ADDRESS" class="col-sm-4 control-label  padding-top">Country Abbreviation<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control" name="b_country_abbriviation" value="" id="BILL-country_abbriviation" maxlength="2">
                           {% if form_shipping.errors.b_country_abbriviation %}
                           <strong style="color:red">{{ form_shipping.errors.b_country_abbriviation | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="inner-info">
               <div class="form-heading ">SHIPPING INFORMATION</div>
               <div class="form-check">
                  <label class="margin-bottom">
                  SAME AS BILLLING INFORMATION &nbsp; &nbsp;
                  <input type="radio" name='radio' id="billing_checkbox_id" onclick="same_as_billing(true)" class="form-check-input" /> Yes
                  <input type="radio" name='radio' id="billing_checkbox_id" onclick="same_as_billing(false)" class="form-check-input" checked="checked"/> No 
                  
                  </label>
               </div>
               <div class="row" id='Billing'">
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-FIRSTNAME"  class="col-sm-4 control-label padding-top">FIRST NAME<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_first_name" value="" id="SHIP-FIRSTNAME" maxlength="25">
                           {% if form_shipping.errors.s_first_name %}
                           <strong style="color:red">{{ form_shipping.errors.s_first_name | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-LASTNAME" class="col-sm-4 control-label  padding-top">LAST NAME<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_last_name" value="" id="SHIP-LASTNAME" maxlength="25">
                           {% if form_shipping.errors.s_last_name %}
                           <strong style="color:red">{{ form_shipping.errors.s_last_name | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-ADDRESS" class="col-sm-4 control-label  padding-top">EMAIL<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_email" value="" id="SHIP-EMAIL" maxlength="80">
                           {% if form_shipping.errors.s_email %}
                           <strong style="color:red">{{ form_shipping.errors.s_email | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-PHONE" class="col-sm-4 control-label  padding-top">PHONE<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="tel" class="form-control bgcolor" name="s_phone" value="" id="SHIP-PHONE" maxlength="15">
                           {% if form_shipping.errors.s_phone %}
                           <strong style="color:red">{{ form_shipping.errors.s_phone | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-ADDRESS" class="col-sm-4 control-label  padding-top">ADDRESS<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_address" value="" id="SHIP-ADDRESS" maxlength="80">
                           {% if form_shipping.errors.s_address %}
                           <strong style="color:red">{{ form_shipping.errors.s_address | escape }}
                           </strong> 
                           {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-STATE" class="col-sm-4 control-label  padding-top">STATE<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <select class="form-control bgcolor" name="s_state" value="" id="SHIP-STATE">
                              <option></option>
                           </select>
                           {% if form_shipping.errors.s_state %}
                           <strong style="color:red">{{ form_shipping.errors.s_state | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-CITY" class="col-sm-4 control-label  padding-top">CITY<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_city" value="" id="SHIP-CITY" maxlength="50">
                           {% if form_shipping.errors.s_city %}
                           <strong style="color:red">{{ form_shipping.errors.s_city | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-ZIP" class="col-sm-4 control-label  padding-top">ZIP<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_zip" value="" id="SHIP-ZIP" maxlength="15">
                           {% if form_shipping.errors.s_zip %}
                           <strong style="color:red">{{ form_shipping.errors.s_zip | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-12">
                     <div class="form-group">
                        <label for="SHIP-COMPANY" class="col-sm-2 control-label  padding-top">COMPANY</label>
                        <div class="col-sm-10">
                           <input type="text" class="form-control bgcolor" name="s_company" value="" id="SHIP-COMPANY" maxlength="50">
                           {% if form_shipping.errors.s_company %}
                           <strong style="color:red">{{ form_shipping.errors.s_company | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-COUNTRY" class="col-sm-4 control-label  padding-top">COUNTRY<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <select class="form-control bgcolor" name="s_country" value="" id="country3">
                              <option></option>
                           </select>
                           {% if form_shipping.errors.s_country %}
                           <strong style="color:red">{{ form_shipping.errors.s_country | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="form-group">
                        <label for="SHIP-ADDRESS" class="col-sm-4 control-label  padding-top">Country Abbreviation<span class="required-field">*</span></label>
                        <div class="col-sm-8">
                           <input type="text" class="form-control bgcolor" name="s_country_abbriviation" value="" id="SHIP-country_abbriviation" maxlength="2">
                           {% if form_shipping.errors.s_country_abbriviation %}
                           <strong style="color:red">{{ form_shipping.errors.s_country_abbriviation | escape }}</strong> {% endif %}
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="row">
               <div class="col-sm-6">
                  <div class="inner-info">
                     <div class="form-heading ">SHIPPING & HANDLING </div>
                     <div class="form-check disabled">
                        <label class="form-check-label">
                        <input type="radio" class="form-check-input" name="mode_of_transport" value="GPS" onclick="check_value('gps')" id='gps_radio'>
                        GPS transporte
                        {% if form_shipping.errors.mode_of_transport %}
                        <strong style="color:red">{{ form_shipping.errors.mode_of_transport | escape }}</strong> {% endif %}
                        </label>
                     </div>
                     <div class="form-check">
                        <label class="form-check-label">
                        <input type="radio" class="form-check-input" name="mode_of_transport" value="DHL" onclick="check_value('dhl')" id='DHL_radio'>
                        DHL
                        {% if form_shipping.errors.mode_of_transport %}
                        <strong style="color:red">{{ form_shipping.errors.mode_of_transport | escape }}</strong> {% endif %}
                        </label>
                     </div>
                     <button type="submit" class="btn btn-success btn-continue">CONTINUE</button>
                     <span class="continue-btn-marginunder"> </span>
                  </div>
               </div>
               <div class="col-sm-6">
                  <div class="text-right" id="amount">
                  </div>
               </div>
            </div>
         </div>
      </div>
   </form>
</section>
<script type="text/javascript">
   function message_lobi(message){
       Lobibox.notify('error', {
          showClass: 'fadeInDown',
          position: 'top center',
          hideClass: 'fadeUpDown',
          sound: false,
          msg: message
      });
   }
   function check_value(type){
      result = false
      if(!$("#SHIP-FIRSTNAME").val()){
          message_lobi('Please fill the Shipping Details Firstname !')
          result = true
      }else if(!$("#SHIP-LASTNAME").val()){
          message_lobi('Please fill the Shipping Details lastname !')
          result = true
      }else if(!$("#SHIP-COMPANY").val()){
           message_lobi('Please fill the Shipping Details company !')
          result = true
      }else if(!$("#country3").val()){
           message_lobi('Please fill the Shipping Details country !')
           result = true
      }else if(!$("#SHIP-STATE").val()){
           message_lobi('Please fill the Shipping Details state !')
           result = true
      }else if(!$("#SHIP-CITY").val()){
           message_lobi('Please fill the Shipping Details city !')
           result = true
      }else if(!$("#SHIP-ZIP").val()){
           message_lobi('Please fill the Shipping Details zip !')
           result = true
      }else if(!$("#SHIP-ADDRESS").val()){
           message_lobi('Please fill the Shipping Details address !')
           result = true
      }else if(!$("#SHIP-country_abbriviation").val()){
           message_lobi('Please fill the Shipping Details country abbreviation !')
           result = true
      }else if(!$("#SHIP-EMAIL").val()){
           message_lobi('Please fill the Shipping Details email !')
           result = true
      }else if(!$("#SHIP-PHONE").val()){
           message_lobi('Please fill the Shipping Details phone number !')
           result = true
      }
      if(type=='gps' && result){
          $('#gps_radio').prop('checked', false);
          return;
      }else if(type=='dhl' && result){
          $('#DHL_radio').prop('checked', false);
          return
      }
      $('#amount').empty();
      if(!result){
           Lobibox.progress({
              title: 'Please wait',
              label: 'Calculating Amount...',
              delayIndicator: true,
              delay: 5000,
              onShow: function ($this) {
                      i = 0;
                      inter = setInterval(function () {
                      window.console.log(i);
                      if (i > 100) {
                          inter = clearInterval(inter);
                      }
                      i = i + 0.4;
                      $this.setProgress(i);
                  }, 10);
              }
              });
          $.ajax({
          type: 'POST',
          url: "{% url 'Juntos:dhl-shippingprice' %}",
          dataType: 'json',
          data: {
              'csrfmiddlewaretoken': '{{ csrf_token }}',
          },
          success: function(e) {
              $('#amount').append('<div class="rate" id="rate" > Tax : <span>18%</span></div>'+
          '<div class="rate" id="shipping" > Shipping Charge : <span>5%</span></div>'+
          '<div class="rate" id="price"> Total Amount : '+e.total_shipping_charges.toFixed(2)+'</div>')
              inter = clearInterval(inter);
          },
      });
   }
   var list = "{{all_product_cart|escapejs}}"
   };
</script>
<script language="javascript">
   populateCountries("Bill-COUNTRY", "BILL-STATE");
   populateCountries("country3", "SHIP-STATE");
   var same_as_billing = function(val){
    if(val == true){
    
   $('#SHIP-FIRSTNAME').val($('#FIRSTNAME').val())
   $('#SHIP-LASTNAME').val($('#LASTNAME').val())
   $('#SHIP-COMPANY').val($('#COMPANY').val())
   $('#country3').val($('#Bill-COUNTRY').val())
   populateStates("country3", "SHIP-STATE")
   $('#SHIP-STATE').val($('#BILL-STATE').val())
   $('#SHIP-CITY').val($('#CITY').val())
   $('#SHIP-ZIP').val($('#ZIP').val())
   $('#SHIP-ADDRESS').val($('#ADDRESS').val())
   $('#SHIP-PHONE').val($('#PHONE').val())
   $('#SHIP-EMAIL').val($('#Email').val())
   $('#SHIP-country_abbriviation').val($('#BILL-country_abbriviation').val())
   document.getElementById('Billing').style.display = 'none';
   }
   else{
    document.getElementById('Billing').style.display = 'block';
   }
    }
</script>
{% endblock %}